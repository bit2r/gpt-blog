[
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "블로그에 오신 것을 환영합니다.",
    "section": "",
    "text": "쿼토로 저작하신 다양한 블로그 환영합니다.\n\n\n\n\n\nSince this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "공식 블로그",
    "section": "",
    "text": "코호트 분석\n\n\n\n\n\n\n\n분석\n\n\n코호트\n\n\n\n\n\n\n\n\n\n\n\n2023년 10월 13일\n\n\n이광춘\n\n\n\n\n\n\n  \n\n\n\n\n블로그에 오신 것을 환영합니다.\n\n\n\n\n\n\n\n뉴스\n\n\n\n\n\n\n\n\n\n\n\n2023년 10월 08일\n\n\n이광춘\n\n\n\n\n\n\n일치 없음"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "한국R사용자회",
    "section": "",
    "text": "한국 R 사용자회에서 운영하는 공식 블로그입니다."
  },
  {
    "objectID": "posts/post-with-code/index.html",
    "href": "posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "This is a post with executable code.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "posts/2023-10-13-cohort/index.html",
    "href": "posts/2023-10-13-cohort/index.html",
    "title": "코호트 분석",
    "section": "",
    "text": "코호트 분석(Cohort Analysis)은 고객 또는 사용자 유지율을 시각화하여 비즈니스 사업목표 달성에 도움이 되는 대표적인 방법론이다. cohorts R 패키지는 코호트 분석을 단순화하는 몇 가지 쉽게 핵심 함수를 제공한다. (Christensen, 2022) 코호트 분석을 위해서 데이터프레임에서 사용자 ID와 날짜를 포함한 두 열이 필요하다.\n‘cohorts’ 패키지는 코호트 테이블을 월별 또는 일별로 집계할 수 있게 해준다. 이 테이블은 시간이 지남에 따라 각 코호트의 고객 수가 어떻게 변하는지를 보여준다. 또한, 유지율 표를 백분율로 표시하고 gt 패키지를 통해 적은 코드로 핵심적인 사항을 파악할 수 있다."
  },
  {
    "objectID": "posts/welcome/index.html#데이터",
    "href": "posts/welcome/index.html#데이터",
    "title": "코호트 분석",
    "section": "데이터",
    "text": "데이터\nhttp://www.brucehardie.com/datasets/ 웹사이트에서 RFM 데이터 분석을 위한 데이터를 다운로드 받아 압축을 풀고 데이터를 살펴본다.\n\nA dataset containing the entire purchase history up to the end of June 1998 of the cohort of 23,570 individuals who made their first-ever purchase at CDNOW in the first quarter of 1997.\n\n\n# 0. 환경설정 -----------\nlibrary(tidyverse)\nlibrary(ggpubr)\nextrafont::loadfonts(quiet = TRUE)\nlibrary(gt)\nlibrary(gtExtras)\n\n# 1. 데이터 가져오기 -----------\n## 1.1. 데이터 다운로드\n# download.file(url=\"http://www.brucehardie.com/datasets/CDNOW_master.zip\", destfile = \"data/CDNOW_master.zip\")\n# unzip(\"data/CDNOW_master.zip\", exdir =\"data/CDNOW\")\n \n## 1.2. 데이터 가져오기\ncdnow_dat &lt;- read_fwf(glue::glue(\"{here::here()}/data/CDNOW/CDNOW_master.txt\"), fwf_cols(cid = 6, pdate = 9, numCDs = 3, amount=8))\n\ncdnow_dat %&gt;% \n  sample_n(100) \n## # A tibble: 100 × 4\n##    cid      pdate numCDs amount\n##    &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n##  1 09731 19970205      1   4.79\n##  2 11832 19970213     12 173.  \n##  3 20341 19970313      1  11.8 \n##  4 13062 19970216      1  14.0 \n##  5 02928 19970303      1  25.0 \n##  6 15026 19980208      2  18.5 \n##  7 23181 19970324      2  27.3 \n##  8 01890 19971201      2  17.0 \n##  9 23466 19970512      1  11.8 \n## 10 10967 19970505      1  15.4 \n## # ℹ 90 more rows\n\n데이터의 자료형을 맞춰주고 나서, 거래최근성, 거래빈도, 거래규모를 원본 데이터에서 산출해서 살펴보기 전에 고객 유지율(retention)표 작성을 위해서 필요한 최소 데이터만 준비한다.\n\n# 2. 데이터 정제 및 RFM -----------\ncdnow_tbl &lt;- cdnow_dat %&gt;% \n    mutate(pdate = parse_date(as.character(pdate), format = \"%Y%m%d\")) %&gt;% \n    select(-numCDs)\n\ncdnow_tbl\n## # A tibble: 69,659 × 3\n##    cid   pdate      amount\n##    &lt;chr&gt; &lt;date&gt;      &lt;dbl&gt;\n##  1 00001 1997-01-01   11.8\n##  2 00002 1997-01-12   12  \n##  3 00002 1997-01-12   77  \n##  4 00003 1997-01-02   20.8\n##  5 00003 1997-03-30   20.8\n##  6 00003 1997-04-02   19.5\n##  7 00003 1997-11-15   57.4\n##  8 00003 1997-11-25   21.0\n##  9 00003 1998-05-28   17.0\n## 10 00004 1997-01-01   29.3\n## # ℹ 69,649 more rows"
  },
  {
    "objectID": "posts/welcome/index.html#코호트-분석",
    "href": "posts/welcome/index.html#코호트-분석",
    "title": "코호트 분석",
    "section": "코호트 분석",
    "text": "코호트 분석\n\n코호트 숫자\n\nlibrary(cohorts)\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate)  \n## # A tibble: 3 × 19\n##   cohort `1 1997` `2 1997` `3 1997` `4 1997` `5 1997` `6 1997` `7 1997` `8 1997`\n##    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;\n## 1      1     7846     1157      964      810      679      736      720      582\n## 2      2       NA     8476     1312      980      783      847      786      626\n## 3      3       NA       NA     7248     1032      752      756      674      564\n## # ℹ 10 more variables: `9 1997` &lt;int&gt;, `10 1997` &lt;int&gt;, `11 1997` &lt;int&gt;,\n## #   `12 1997` &lt;int&gt;, `1 1998` &lt;int&gt;, `2 1998` &lt;int&gt;, `3 1998` &lt;int&gt;,\n## #   `4 1998` &lt;int&gt;, `5 1998` &lt;int&gt;, `6 1998` &lt;int&gt;\n\n\n\n코호트 비율\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1)\n## # A tibble: 3 × 19\n##   cohort `1 1997` `2 1997` `3 1997` `4 1997` `5 1997` `6 1997` `7 1997` `8 1997`\n##    &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n## 1      1      100     14.7     12.3     10.3      8.7      9.4      9.2      7.4\n## 2      2       NA    100       15.5     11.6      9.2     10        9.3      7.4\n## 3      3       NA     NA      100       14.2     10.4     10.4      9.3      7.8\n## # ℹ 10 more variables: `9 1997` &lt;dbl&gt;, `10 1997` &lt;dbl&gt;, `11 1997` &lt;dbl&gt;,\n## #   `12 1997` &lt;dbl&gt;, `1 1998` &lt;dbl&gt;, `2 1998` &lt;dbl&gt;, `3 1998` &lt;dbl&gt;,\n## #   `4 1998` &lt;dbl&gt;, `5 1998` &lt;dbl&gt;, `6 1998` &lt;dbl&gt;\n\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1) |&gt; \n  shift_left()  \n## # A tibble: 3 × 19\n##   cohort    t0    t1    t2    t3    t4    t5    t6    t7    t8    t9   t10   t11\n##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n## 1      1   100  14.7  12.3  10.3   8.7   9.4   9.2   7.4   7.1   7.6   8.6   8.1\n## 2      2   100  15.5  11.6   9.2  10     9.3   7.4   7.3   7.9   8.5   7.8   6.4\n## 3      3   100  14.2  10.4  10.4   9.3   7.8   7.7   8     8.7   7.9   6.4   6.5\n## # ℹ 6 more variables: t12 &lt;dbl&gt;, t13 &lt;dbl&gt;, t14 &lt;dbl&gt;, t15 &lt;dbl&gt;, t16 &lt;dbl&gt;,\n## #   t17 &lt;dbl&gt;\n\n\n\n그래프\n\ncdnow_gg_tbl &lt;- cdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1) |&gt; \n  shift_left() |&gt; \n  pivot_longer(-cohort) %&gt;%\n  mutate(time = as.numeric(str_remove(name,\"t\"))) \n\ncdnow_gg_tbl |&gt; \n  filter(time &gt; 0) |&gt;  \n  ggplot(aes(time, value, colour = factor(cohort), group = cohort)) +\n  geom_line(size = 0.5) +\n  geom_point(size = 1.5) +\n  theme_minimal() +\n  labs(color = \"코호트\", x = \"시간(월)\", y = \"유지율(%)\",\n       title = \"CDNOW 코호트 분석\",\n       subtitle = \"1997년 1/4분기 CDNOW 구매고객\")\n\n\n\n\n\n\n\n\n\n\n유지율 표\n\ncdnow_tbl |&gt;\n  filter(pdate &lt;= as.Date(\"1997-06-30\")) |&gt; \n  cohort_table_month(cid, pdate)  |&gt; \n  pivot_longer(-cohort) %&gt;%\n  mutate(time = str_sub(name, 1, 1))  |&gt;\n  mutate(value = ifelse(is.na(value), 0, value)) |&gt; \n  ggplot(aes(time, reorder(cohort, desc(cohort)))) +\n   geom_raster(aes(fill = log(value))) +\n   coord_equal(ratio = 1) +\n   geom_text(aes(label = str_glue(\"{scales::comma(value)} 명\")), \n                 size  = 3, \n                 colour = \"snow\") +\n  scale_fill_gradient(guide = \"none\") +\n  theme_minimal(base_size = 16) +\n  theme(panel.grid   = element_blank(),\n        panel.border = element_blank()) +\n  labs(y = \"코호트\",\n       x = \"시간(월)\",\n       title = \"CDNOW 코호트 분석\")  \n\n\n\n\n\n\n\n\n\ncdnow_tbl |&gt;\n  filter(pdate &lt;= as.Date(\"1997-06-30\")) |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  gt() |&gt; \n  fmt_integer(columns = -cohort) |&gt; \n  fmt_missing(columns = everything(), missing_text = \"-\") |&gt; \n  cols_align(\"center\") |&gt; \n  gt_theme_538() |&gt; \n  data_color(\n    columns = -cohort,\n    method = \"numeric\",\n    palette = \"inferno\",\n    na_color = \"white\"\n  )\n\n\n\n\n\n  \n    \n    \n      cohort\n      1 1997\n      2 1997\n      3 1997\n      4 1997\n      5 1997\n      6 1997\n    \n  \n  \n    1\n7,846\n1,157\n964\n810\n679\n736\n    2\n-\n8,476\n1,312\n980\n783\n847\n    3\n-\n-\n7,248\n1,032\n752\n756"
  },
  {
    "objectID": "posts/welcome/index.html#footnotes",
    "href": "posts/welcome/index.html#footnotes",
    "title": "코호트 분석",
    "section": "각주",
    "text": "각주\n\n\nJack Han (2013), RFM Customer Analysis with R Language↩︎\nKamil Bartocha, Lead Data Scientist at Schroders(2015), RFM Segmentation↩︎"
  },
  {
    "objectID": "posts/2023-10-13-cohort/index.html#데이터",
    "href": "posts/2023-10-13-cohort/index.html#데이터",
    "title": "코호트 분석",
    "section": "데이터",
    "text": "데이터\nhttp://www.brucehardie.com/datasets/ 웹사이트에서 RFM 데이터 분석을 위한 데이터를 다운로드 받아 압축을 풀고 데이터를 살펴본다.\n\nA dataset containing the entire purchase history up to the end of June 1998 of the cohort of 23,570 individuals who made their first-ever purchase at CDNOW in the first quarter of 1997.\n\n\n# 0. 환경설정 -----------\nlibrary(tidyverse)\nlibrary(ggpubr)\nextrafont::loadfonts(quiet = TRUE)\nlibrary(gt)\nlibrary(gtExtras)\n\n# 1. 데이터 가져오기 -----------\n## 1.1. 데이터 다운로드\n# download.file(url=\"http://www.brucehardie.com/datasets/CDNOW_master.zip\", destfile = \"data/CDNOW_master.zip\")\n# unzip(\"data/CDNOW_master.zip\", exdir =\"data/CDNOW\")\n \n## 1.2. 데이터 가져오기\ncdnow_dat &lt;- read_fwf(glue::glue(\"{here::here()}/data/CDNOW/CDNOW_master.txt\"), fwf_cols(cid = 6, pdate = 9, numCDs = 3, amount=8))\n\ncdnow_dat %&gt;% \n  sample_n(100) \n## # A tibble: 100 × 4\n##    cid      pdate numCDs amount\n##    &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n##  1 09884 19970320      2  35.5 \n##  2 09453 19980106      1  13.0 \n##  3 18761 19970307      4 118.  \n##  4 15025 19980412      1   7.69\n##  5 06883 19970219      2  28.4 \n##  6 17252 19970422      1  17.3 \n##  7 20186 19970312      1  11.8 \n##  8 01593 19970521      3 104.  \n##  9 23179 19970411      3  42.1 \n## 10 23493 19970325      1  14.4 \n## # ℹ 90 more rows\n\n데이터의 자료형을 맞춰주고 나서, 거래최근성, 거래빈도, 거래규모를 원본 데이터에서 산출해서 살펴보기 전에 고객 유지율(retention)표 작성을 위해서 필요한 최소 데이터만 준비한다.\n\n# 2. 데이터 정제 및 RFM -----------\ncdnow_tbl &lt;- cdnow_dat %&gt;% \n    mutate(pdate = parse_date(as.character(pdate), format = \"%Y%m%d\")) %&gt;% \n    select(-numCDs)\n\ncdnow_tbl\n## # A tibble: 69,659 × 3\n##    cid   pdate      amount\n##    &lt;chr&gt; &lt;date&gt;      &lt;dbl&gt;\n##  1 00001 1997-01-01   11.8\n##  2 00002 1997-01-12   12  \n##  3 00002 1997-01-12   77  \n##  4 00003 1997-01-02   20.8\n##  5 00003 1997-03-30   20.8\n##  6 00003 1997-04-02   19.5\n##  7 00003 1997-11-15   57.4\n##  8 00003 1997-11-25   21.0\n##  9 00003 1998-05-28   17.0\n## 10 00004 1997-01-01   29.3\n## # ℹ 69,649 more rows"
  },
  {
    "objectID": "posts/2023-10-13-cohort/index.html#코호트-분석",
    "href": "posts/2023-10-13-cohort/index.html#코호트-분석",
    "title": "코호트 분석",
    "section": "코호트 분석",
    "text": "코호트 분석\n\n코호트 숫자\n\nlibrary(cohorts)\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate)  \n## # A tibble: 3 × 19\n##   cohort `1 1997` `2 1997` `3 1997` `4 1997` `5 1997` `6 1997` `7 1997` `8 1997`\n##    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;\n## 1      1     7846     1157      964      810      679      736      720      582\n## 2      2       NA     8476     1312      980      783      847      786      626\n## 3      3       NA       NA     7248     1032      752      756      674      564\n## # ℹ 10 more variables: `9 1997` &lt;int&gt;, `10 1997` &lt;int&gt;, `11 1997` &lt;int&gt;,\n## #   `12 1997` &lt;int&gt;, `1 1998` &lt;int&gt;, `2 1998` &lt;int&gt;, `3 1998` &lt;int&gt;,\n## #   `4 1998` &lt;int&gt;, `5 1998` &lt;int&gt;, `6 1998` &lt;int&gt;\n\n\n\n코호트 비율\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1)\n## # A tibble: 3 × 19\n##   cohort `1 1997` `2 1997` `3 1997` `4 1997` `5 1997` `6 1997` `7 1997` `8 1997`\n##    &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n## 1      1      100     14.7     12.3     10.3      8.7      9.4      9.2      7.4\n## 2      2       NA    100       15.5     11.6      9.2     10        9.3      7.4\n## 3      3       NA     NA      100       14.2     10.4     10.4      9.3      7.8\n## # ℹ 10 more variables: `9 1997` &lt;dbl&gt;, `10 1997` &lt;dbl&gt;, `11 1997` &lt;dbl&gt;,\n## #   `12 1997` &lt;dbl&gt;, `1 1998` &lt;dbl&gt;, `2 1998` &lt;dbl&gt;, `3 1998` &lt;dbl&gt;,\n## #   `4 1998` &lt;dbl&gt;, `5 1998` &lt;dbl&gt;, `6 1998` &lt;dbl&gt;\n\n\ncdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1) |&gt; \n  shift_left()  \n## # A tibble: 3 × 19\n##   cohort    t0    t1    t2    t3    t4    t5    t6    t7    t8    t9   t10   t11\n##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n## 1      1   100  14.7  12.3  10.3   8.7   9.4   9.2   7.4   7.1   7.6   8.6   8.1\n## 2      2   100  15.5  11.6   9.2  10     9.3   7.4   7.3   7.9   8.5   7.8   6.4\n## 3      3   100  14.2  10.4  10.4   9.3   7.8   7.7   8     8.7   7.9   6.4   6.5\n## # ℹ 6 more variables: t12 &lt;dbl&gt;, t13 &lt;dbl&gt;, t14 &lt;dbl&gt;, t15 &lt;dbl&gt;, t16 &lt;dbl&gt;,\n## #   t17 &lt;dbl&gt;\n\n\n\n그래프\n\ncdnow_gg_tbl &lt;- cdnow_tbl |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  cohort_table_pct(decimals = 1) |&gt; \n  shift_left() |&gt; \n  pivot_longer(-cohort) %&gt;%\n  mutate(time = as.numeric(str_remove(name,\"t\"))) \n\ncdnow_gg_tbl |&gt; \n  filter(time &gt; 0) |&gt;  \n  ggplot(aes(time, value, colour = factor(cohort), group = cohort)) +\n  geom_line(size = 0.5) +\n  geom_point(size = 1.5) +\n  theme_minimal() +\n  labs(color = \"코호트\", x = \"시간(월)\", y = \"유지율(%)\",\n       title = \"CDNOW 코호트 분석\",\n       subtitle = \"1997년 1/4분기 CDNOW 구매고객\")\n\n\n\n\n\n\n\n\n\n\n유지율 표\n\ncdnow_tbl |&gt;\n  filter(pdate &lt;= as.Date(\"1997-06-30\")) |&gt; \n  cohort_table_month(cid, pdate)  |&gt; \n  pivot_longer(-cohort) %&gt;%\n  mutate(time = str_sub(name, 1, 1))  |&gt;\n  mutate(value = ifelse(is.na(value), 0, value)) |&gt; \n  ggplot(aes(time, reorder(cohort, desc(cohort)))) +\n   geom_raster(aes(fill = log(value))) +\n   coord_equal(ratio = 1) +\n   geom_text(aes(label = str_glue(\"{scales::comma(value)} 명\")), \n                 size  = 3, \n                 colour = \"snow\") +\n  scale_fill_gradient(guide = \"none\") +\n  theme_minimal(base_size = 16) +\n  theme(panel.grid   = element_blank(),\n        panel.border = element_blank()) +\n  labs(y = \"코호트\",\n       x = \"시간(월)\",\n       title = \"CDNOW 코호트 분석\")  \n\n\n\n\n\n\n\n\n\ncdnow_tbl |&gt;\n  filter(pdate &lt;= as.Date(\"1997-06-30\")) |&gt; \n  cohort_table_month(cid, pdate) |&gt; \n  gt() |&gt; \n  fmt_integer(columns = -cohort) |&gt; \n  fmt_missing(columns = everything(), missing_text = \"-\") |&gt; \n  cols_align(\"center\") |&gt; \n  gt_theme_538() |&gt; \n  data_color(\n    columns = -cohort,\n    method = \"numeric\",\n    palette = \"inferno\",\n    na_color = \"white\"\n  )\n\n\n\n\n\n  \n    \n    \n      cohort\n      1 1997\n      2 1997\n      3 1997\n      4 1997\n      5 1997\n      6 1997\n    \n  \n  \n    1\n7,846\n1,157\n964\n810\n679\n736\n    2\n-\n8,476\n1,312\n980\n783\n847\n    3\n-\n-\n7,248\n1,032\n752\n756"
  },
  {
    "objectID": "posts/2023-10-13-cohort/index.html#footnotes",
    "href": "posts/2023-10-13-cohort/index.html#footnotes",
    "title": "코호트 분석",
    "section": "각주",
    "text": "각주\n\n\nJack Han (2013), RFM Customer Analysis with R Language↩︎\nKamil Bartocha, Lead Data Scientist at Schroders(2015), RFM Segmentation↩︎"
  }
]